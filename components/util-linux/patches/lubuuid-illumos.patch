diff -Naur util-linux-2.27.1/libuuid/src/gen_uuid.c util-linux-2.27.1.illumos/libuuid/src/gen_uuid.c
--- util-linux-2.27.1/libuuid/src/gen_uuid.c	2015-11-02 10:17:06.626225888 +0100
+++ util-linux-2.27.1.illumos/libuuid/src/gen_uuid.c	2016-01-17 16:20:34.001504985 +0100
@@ -167,7 +167,7 @@
 	for (i = 0; i < n; i+= ifreq_size(*ifrp) ) {
 		ifrp = (struct ifreq *)((char *) ifc.ifc_buf+i);
 		strncpy(ifr.ifr_name, ifrp->ifr_name, IFNAMSIZ);
-#ifdef SIOCGIFHWADDR
+#if (defined (SIOCGIFHWADDR)) && (! ( defined(sun) || defined(__sun) || defined(__SVR4) || defined(__svr4) ) )
 		if (ioctl(sd, SIOCGIFHWADDR, &ifr) < 0)
 			continue;
 		a = (unsigned char *) &ifr.ifr_hwaddr.sa_data;
